<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Iamfree Blog</title>
  
  <subtitle>十年寒窗如一日，一举成名天下知</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="127.0.0.1/"/>
  <updated>2018-05-25T08:46:48.360Z</updated>
  <id>127.0.0.1/</id>
  
  <author>
    <name>Iamfree</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>CTF比赛模式</title>
    <link href="127.0.0.1/2018/05/25/CTF%E6%AF%94%E8%B5%9B%E6%A8%A1%E5%BC%8F/"/>
    <id>127.0.0.1/2018/05/25/CTF比赛模式/</id>
    <published>2018-05-25T08:38:38.000Z</published>
    <updated>2018-05-25T08:46:48.360Z</updated>
    
    <content type="html"><![CDATA[<h2 id="目前主要的CTF比赛模式如下"><a href="#目前主要的CTF比赛模式如下" class="headerlink" title="目前主要的CTF比赛模式如下"></a>目前主要的CTF比赛模式如下</h2><a id="more"></a><h3 id="一、解题模式（Jeopardy）"><a href="#一、解题模式（Jeopardy）" class="headerlink" title="一、解题模式（Jeopardy）"></a>一、解题模式（Jeopardy）</h3><p>在解题模式CTF赛制中，参赛队伍可以通过互联网或者现场网络参与比赛，比赛以解决网络安全技术挑战题目的分值和时间来排名，通常用于在线选拔赛，比赛一般会持续48小时及以上。题目类型主要包含逆向分析、漏洞挖掘与利用、移动安全、Web安全、密码、取证、隐写、编程、流量分析等等类别。</p><h3 id="二、攻防模式（Attack-Defense）"><a href="#二、攻防模式（Attack-Defense）" class="headerlink" title="二、攻防模式（Attack-Defense）"></a>二、攻防模式（Attack-Defense）</h3><p>在攻防模式CTF赛制中，参赛队伍在网络空间互相进行攻击和防守，挖掘网络服务漏洞并攻击对手服务来得分，修补自身服务漏洞进行防御来避免丢分。攻防模式CTF赛制可以实时通过得分反映出比赛情况，最终也以得分直接分出胜负。这种赛制一般在线下举行，在这种赛制中，不仅仅是比拼参赛队员的智力和技术，也比拼体力（因为比赛一般都会持续48小时及以上），同时也比拼团队之间的分工配合与合作。</p><h3 id="三、混合模式（Mix）"><a href="#三、混合模式（Mix）" class="headerlink" title="三、混合模式（Mix）"></a>三、混合模式（Mix）</h3><p>结合了解题模式与攻防模式的CTF赛制，比如参赛队伍通过解题可以获取一些初始分数，然后通过攻防对抗进行得分增减的零和游戏，最终以得分高低分出胜负。采用混合模式CTF赛制的典型代表如iCTF国际CTF竞赛。(改自<a href="https://link.zhihu.com/?target=http%3A//baike.baidu.com/subview/2735962/16211061.htm" target="_blank" rel="noopener">ctf（夺旗赛）</a>)</p><blockquote class="blockquote-center"><p>十年寒窗无人问，一举成名天下知<br>                            – Cai_Team</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;目前主要的CTF比赛模式如下&quot;&gt;&lt;a href=&quot;#目前主要的CTF比赛模式如下&quot; class=&quot;headerlink&quot; title=&quot;目前主要的CTF比赛模式如下&quot;&gt;&lt;/a&gt;目前主要的CTF比赛模式如下&lt;/h2&gt;
    
    </summary>
    
      <category term="CTF" scheme="127.0.0.1/categories/CTF/"/>
    
    
      <category term="转载文章" scheme="127.0.0.1/tags/%E8%BD%AC%E8%BD%BD%E6%96%87%E7%AB%A0/"/>
    
      <category term="CTF" scheme="127.0.0.1/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>CTF如何入门</title>
    <link href="127.0.0.1/2018/05/25/CTF%E5%A6%82%E4%BD%95%E5%85%A5%E9%97%A8/"/>
    <id>127.0.0.1/2018/05/25/CTF如何入门/</id>
    <published>2018-05-25T08:20:03.000Z</published>
    <updated>2018-05-25T08:48:31.269Z</updated>
    
    <content type="html"><![CDATA[<div class="note info"><p>希望你抱着学习和提高的目的进入CTF坑，不要一味为了比赛而比赛迷失其中，勿忘初心，方能始终，与君共勉：）</p></div><a id="more"></a><h2 id="题目类型"><a href="#题目类型" class="headerlink" title="题目类型"></a>题目类型</h2><ul><li>Web</li><li>Crypto</li><li>PWN</li><li>Misc<ul><li>stego</li><li>forensic</li><li>…</li></ul></li><li>Reverse</li><li>PPC(Professonal ProgramCoder)</li></ul><p>国际比赛：DEFCON资格赛<br>国内比赛：XCTF联赛</p><h2 id="打CTF的意义"><a href="#打CTF的意义" class="headerlink" title="打CTF的意义"></a>打CTF的意义</h2><ul><li>思维能力</li><li>快速学习能力</li><li>技术能力</li><li>如何入门</li><li>编程语言基础（C语言、汇编语言、大部分脚本语言）</li><li>数学基础（算法、密码学）</li><li>脑洞大开、并落地（天马行空的想象、推理解密）</li><li>体力耐力（通宵熬夜不睡觉，学习新技术、突破难关，结果不重要，过程很重要）</li></ul><h2 id="如何学"><a href="#如何学" class="headerlink" title="如何学?"></a>如何学?</h2><ul><li>恶补基础知识</li><li>从脑洞开始</li><li>从基础题出发<ul><li>单、双点知识 </li></ul></li><li>学习信息安全专业知识</li><li>锻炼体力耐力</li></ul><h3 id="学之前的思考"><a href="#学之前的思考" class="headerlink" title="学之前的思考"></a>学之前的思考</h3><h4 id="分析赛题情况"><a href="#分析赛题情况" class="headerlink" title="分析赛题情况"></a>分析赛题情况</h4><ul><li>Crypto偏重对数学、算法的学习</li><li>Web偏重发散思惟、对技巧沉淀、快速搜索能力的挑战，漏洞点几类</li><li>Misc则更为复杂：隐写类、图片数据分析、数据还原、流量分析、大数据</li></ul><h4 id="分析自身兴趣"><a href="#分析自身兴趣" class="headerlink" title="分析自身兴趣"></a>分析自身兴趣</h4><ul><li>PWN+Re+Crypto随机搭配</li><li>Web+Misc组合</li><li>精力有限先从一两个方向做起</li></ul><h4 id="如何恶补知识"><a href="#如何恶补知识" class="headerlink" title="如何恶补知识"></a>如何恶补知识</h4><ul><li>linux、组原、OS、网络协议分析</li><li>二进制：IDA工具使用，f5插件、OD、逆向工程、密码学、缓冲区溢出</li></ul><h4 id="推荐书籍"><a href="#推荐书籍" class="headerlink" title="推荐书籍"></a>推荐书籍</h4><ul><li>RE for Beginners(逆向工程入门。德国)</li><li>IDA PRO权威指南</li><li>揭秘家用路由器0day漏洞挖掘技术</li><li>自己动手写操作系统</li><li>黑客攻防技术宝典：系统实战篇</li><li>web：网络安全、内网渗透、数据库安全、OWASPTOP10</li><li>Web应用安全权威指南。日本！！！宏观</li><li>Web前端黑客技术揭秘——总结、吃透则直线上升、核心技术点都包含</li><li>黑客秘籍-渗透测试使用指南</li><li>黑客攻防技术宝典：web实战篇</li><li>代码审计：企业级web代码安全架构</li></ul><h3 id="如何成为一个赛棍"><a href="#如何成为一个赛棍" class="headerlink" title="如何成为一个赛棍"></a>如何成为一个赛棍</h3><h4 id="从基础题目出发"><a href="#从基础题目出发" class="headerlink" title="从基础题目出发"></a>从基础题目出发</h4><ul><li><a href="http://ctf.idf.cn" target="_blank" rel="noopener">http://ctf.idf.cn</a> idf实验室，非常基础，单点知识，挫败感较小</li><li><a href="http://www.ichunqiu.com" target="_blank" rel="noopener">www.ichunqiu.com</a> 线下线上题目复现</li><li><a href="http://oj.xctf.org.cn" target="_blank" rel="noopener">http://oj.xctf.org.cn</a> xctf历年题目，较难</li><li><a href="http://www.wechall.net/challs" target="_blank" rel="noopener">www.wechall.net/challs</a> 非常入门的国外CTF 入门网站 国内安全大牛出发点，可首选</li><li><a href="http://canyouhack.it" target="_blank" rel="noopener">http://canyouhack.it</a> 非常入门，涉及一些移动安全</li><li><a href="http://microcorruption.com/login" target="_blank" rel="noopener">http://microcorruption.com/login</a> 很酷炫，游戏化，二进制方向</li><li><a href="http://smashthestack.org/" target="_blank" rel="noopener">http://smashthestack.org/</a> war game 非常简洁的内容 ssh连入即玩</li><li><a href="http://overthewire.org/wargames" target="_blank" rel="noopener">http://overthewire.org/wargames</a> 老牌wargame,国内资料较多，WP: <a href="http://drops.wooyun.org/author/litao3rd" target="_blank" rel="noopener">http://drops.wooyun.org/author/litao3rd</a></li><li><a href="http://exploit-exercises.com" target="_blank" rel="noopener">http://exploit-exercises.com</a> 老牌wargame，国内资料较多</li><li><a href="http://pwnable.kr/play.php" target="_blank" rel="noopener">http://pwnable.kr/play.php</a> 100题左右，较基础</li><li><a href="http://ctf.moonsos.com/pentest/index.php" target="_blank" rel="noopener">http://ctf.moonsos.com/pentest/index.php</a> web安全核心技术点</li><li><a href="http://prompt.ml/0" target="_blank" rel="noopener">http://prompt.ml/0</a> xss 国外测试平台,不考核对错，自己尝试</li><li><a href="http://redtiger.labs.overthewire.org" target="_blank" rel="noopener">http://redtiger.labs.overthewire.org</a> sql注入挑战赛</li></ul><h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><ul><li>burp、ida</li><li><a href="https://github.com/truongkma/ctf-tools" target="_blank" rel="noopener">https://github.com/truongkma/ctf-tools</a></li><li><a href="https://github.com/P1kachu/v0lt" target="_blank" rel="noopener">https://github.com/P1kachu/v0lt</a></li><li><a href="https://github.com/zardus/ctf-tools" target="_blank" rel="noopener">https://github.com/zardus/ctf-tools</a></li><li><a href="https://github.com/TUCTF/Tools" target="_blank" rel="noopener">https://github.com/TUCTF/Tools</a></li></ul><blockquote><p>以练促赛、以赛养练：都参与，不在乎名次，看多个WP，对比，重视思路，复现过程，寻找相关题目。<br>以练促赛：选择一场已经存在WP的比赛<br>以赛养练：参加一场最新的CTF，名次不重要，赛后要吃透，猜测作者怎么想，跟着作者想法走<br><a href="https://ctftime.org/" target="_blank" rel="noopener">https://ctftime.org/</a> 国际比赛<br><a href="http://www.xctf.org.cn/" target="_blank" rel="noopener">http://www.xctf.org.cn/</a> 国内比赛</p></blockquote><h2 id="组建团队"><a href="#组建团队" class="headerlink" title="组建团队:"></a>组建团队:</h2><h3 id="强力成员画像"><a href="#强力成员画像" class="headerlink" title="强力成员画像"></a>强力成员画像</h3><ul><li>思维跳跃：灵活、不钻牛角尖</li><li>专注：遇到问题不放弃直到解决</li><li>耐力：可以一昼夜不睡觉地研究技术</li><li>团队精神：责任、凝聚（相信将来总会得第一）、分享（先富带动后富）</li><li>有以上三条为强力成员，四条可为队长</li></ul><h3 id="组建团队要解决的问题"><a href="#组建团队要解决的问题" class="headerlink" title="组建团队要解决的问题"></a>组建团队要解决的问题</h3><ul><li>新人招募：如何评判新人潜力</li><li>队员培养：如何快速培养队伍能力</li><li>梯队有序：如何建立梯队层级</li><li>纪律严格：如何拒绝无团队精神的成员</li></ul><blockquote class="blockquote-center"><p>坚持不懈，相信未来我们一定会成为第一的！<br>十年寒窗无人问，一举成名天下知！<br>                            – Cai_Team</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note info&quot;&gt;&lt;p&gt;希望你抱着学习和提高的目的进入CTF坑，不要一味为了比赛而比赛迷失其中，勿忘初心，方能始终，与君共勉：）&lt;/p&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="CTF" scheme="127.0.0.1/categories/CTF/"/>
    
    
      <category term="转载文章" scheme="127.0.0.1/tags/%E8%BD%AC%E8%BD%BD%E6%96%87%E7%AB%A0/"/>
    
      <category term="CTF" scheme="127.0.0.1/tags/CTF/"/>
    
  </entry>
  
  <entry>
    <title>基于DVWA的反射型Xss测试平台Medium等级讲解</title>
    <link href="127.0.0.1/2018/05/25/%E5%9F%BA%E4%BA%8EDVWA%E7%9A%84%E5%8F%8D%E5%B0%84%E5%9E%8BXss%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0Medium%E7%AD%89%E7%BA%A7%E8%AE%B2%E8%A7%A3/"/>
    <id>127.0.0.1/2018/05/25/基于DVWA的反射型Xss测试平台Medium等级讲解/</id>
    <published>2018-05-25T02:27:24.000Z</published>
    <updated>2018-05-25T08:22:28.976Z</updated>
    
    <content type="html"><![CDATA[<div class="note primary"><p>这是继上节课[基于DVWA的Xss测试平台Low等级讲解]的中等级</p></div><a id="more"></a><p><strong>首先，我们把等级设置为<code>Medium</code> 上节课讲了如何设置这里就不再讲了</strong></p><h3 id="查看Medium源代码"><a href="#查看Medium源代码" class="headerlink" title="查看Medium源代码:"></a>查看<code>Medium</code>源代码:</h3><p><img src="http://static.zybuluo.com/1kbfree/lcvg5jbwdqdbmyxlai363f9l/image_1ceaj53i93ri2t12be93ndtqp.png" alt="image_1ceaj53i93ri2t12be93ndtqp.png-140.1kB"></p><p><strong>点开后是这样的：</strong><br><img src="http://static.zybuluo.com/1kbfree/bb6yzgt81wtl2guv6u9yus7l/image_1ceaj6a2b9ti1o1ee8s1dh31p5v16.png" alt="image_1ceaj6a2b9ti1o1ee8s1dh31p5v16.png-148.6kB"></p><p>代码：<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">header (<span class="string">"X-XSS-Protection: 0"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span>( array_key_exists( <span class="string">"name"</span>, $_GET ) &amp;&amp; $_GET[ <span class="string">'name'</span> ] != <span class="keyword">NULL</span> ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    $name = str_replace( <span class="string">'&lt;script&gt;'</span>, <span class="string">''</span>, $_GET[ <span class="string">'name'</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Feedback for end user</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;pre&gt;Hello $&#123;name&#125;&lt;/pre&gt;"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p><p><em>这里的代码部分也很好理解，比上一章仅仅多了一个过滤，下面来详细讲解一下。</em></p><blockquote><p><code>if( array_key_exists( &quot;name&quot;, $_GET ) &amp;&amp; $_GET[ &#39;name&#39; ] != NULL )</code>这段代码的意思是，如果$_GET中有name这个key并且<code>$_GET[ &#39;name&#39; ]</code>的值不为空的话就执行<code>{}</code>里面的代码。<br><code>$name = str_replace( &#39;&lt;script&gt;&#39;, &#39;&#39;, $_GET[ &#39;name&#39; ] );</code>这句话的意思是把<code>$_GET[&#39; name &#39;]</code>中的<code>&lt;script&gt;</code>过滤为空( <em>并不安全</em> ),最后一段代码就是输出Hello+name的值在页面上</p></blockquote><h3 id="看懂代码后，如何利用呢"><a href="#看懂代码后，如何利用呢" class="headerlink" title="看懂代码后，如何利用呢?"></a>看懂代码后，如何利用呢?</h3><p><em>我们在上面看代码的时候明白了，在这个<code>Medium</code>等级中，只做了把<code>&lt;script&gt;</code>字符给过滤了，那么我下面就来演示一下如何绕过</em></p><h4 id="先来输入-lt-script-gt-后看看是否为空"><a href="#先来输入-lt-script-gt-后看看是否为空" class="headerlink" title="先来输入&lt;script&gt;后看看是否为空:"></a>先来输入<code>&lt;script&gt;</code>后看看是否为空:</h4><p><img src="http://static.zybuluo.com/1kbfree/q8ojr60jtlbgd9j0au2ouazt/image_1ceajjf5k1tj96go2gr1g67125m1j.png" alt="image_1ceajjf5k1tj96go2gr1g67125m1j.png-86.9kB"><br><em>可以看到这里的输出是为空的，下面来讲绕过</em></p><h4 id="绕过方法1："><a href="#绕过方法1：" class="headerlink" title="绕过方法1："></a>绕过方法1：</h4><p>在输入框中输入<code>&lt;scr&lt;script&gt;ipt&gt;alert(&#39;iamfree&#39;)&lt;/script&gt;</code>，来看看结果先:<br><img src="http://static.zybuluo.com/1kbfree/84iq3szjet2wj8yx7ajecdzh/image_1ceajnhjabo21p1gvvr98fad820.png" alt="image_1ceajnhjabo21p1gvvr98fad820.png-187.2kB"></p><p>解释:<br><img src="http://static.zybuluo.com/1kbfree/kx039acf60sxdjfnf2vo5t8k/image_1ceajudl1146t1oc7g2a6eof402d.png" alt="image_1ceajudl1146t1oc7g2a6eof402d.png-226.2kB"></p><h4 id="绕过方法2"><a href="#绕过方法2" class="headerlink" title="绕过方法2:"></a>绕过方法2:</h4><p>用大写的绕过,输入<code>&lt;SCRIPT&gt;alert(&#39;iamfree&#39;)&lt;/SCRIPT&gt;</code><br><img src="http://static.zybuluo.com/1kbfree/m11mwkcv0os5q4zlmrdu0w06/image_1ceb2ofbv8vt1onl1ksphkse9v9.png" alt="image_1ceb2ofbv8vt1onl1ksphkse9v9.png-99.1kB"></p><h3 id="如何防御"><a href="#如何防御" class="headerlink" title="如何防御"></a>如何防御</h3><h4 id="防御方法1"><a href="#防御方法1" class="headerlink" title="防御方法1:"></a>防御方法1:</h4><p>其实防御的方法也和上篇一样，但还有一个也很棒的方法哟。<br><img src="http://static.zybuluo.com/1kbfree/gqffm3fwqdt4k6vs7pmzer9u/image_1cealoccsqkbaqe36k11o114j23n.png" alt="image_1cealoccsqkbaqe36k11o114j23n.png-92.4kB"></p><p>代码:<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">header (<span class="string">"X-XSS-Protection: 0"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span>( array_key_exists( <span class="string">"name"</span>, $_GET ) &amp;&amp; $_GET[ <span class="string">'name'</span> ] != <span class="keyword">NULL</span> ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="comment">// $name = str_replace( '&lt;script&gt;', 'xss', $_GET[ 'name' ] );</span></span><br><span class="line">    <span class="keyword">foreach</span> ( $_GET <span class="keyword">as</span> $key =&gt; $value ) &#123; <span class="comment">//把$_GET数组里的值分成$key和$value</span></span><br><span class="line">        $name = $_GET[ $key ] = htmlspecialchars( $value ); <span class="comment">//把$_GET数组中$key对应的$value值html实例化，并且赋值给$name变量</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Feedback for end user</span></span><br><span class="line">    $html .= <span class="string">"&lt;pre&gt;Hello $&#123;name&#125;&lt;/pre&gt;"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p><p><img src="http://static.zybuluo.com/1kbfree/a5wvesn1t9741djg96556kmi/image_1ceall6lr1hh9v331eodlhs1a9t2q.png" alt="image_1ceall6lr1hh9v331eodlhs1a9t2q.png-75.9kB"></p><h4 id="防御方法2："><a href="#防御方法2：" class="headerlink" title="防御方法2："></a>防御方法2：</h4><p><img src="http://static.zybuluo.com/1kbfree/l0deuo57o271iokpaxa2nq9x/image_1ceam2i9s1v1m18m8be116tn1vpn4n.png" alt="image_1ceam2i9s1v1m18m8be116tn1vpn4n.png-93.1kB"></p><p>只需要加上一条<code>preg_replace( &#39;/&lt;(.*)s(.*)c(.*)r(.*)i(.*)p(.*)t/i&#39;, &#39;&#39;, $_GET[ &#39;name&#39; ] )</code>，这也是<code>high</code>等级的防御方法</p><p><img src="http://static.zybuluo.com/1kbfree/z03p7xg6vp5riplabe5q7ti5/image_1ceam65gk1rn8140916so14nf1rfd54.png" alt="image_1ceam65gk1rn8140916so14nf1rfd54.png-64.4kB"></p><blockquote class="blockquote-center"><p>十年寒窗无人问，一举成名天下知<br>                            – Cai_Team</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note primary&quot;&gt;&lt;p&gt;这是继上节课[基于DVWA的Xss测试平台Low等级讲解]的中等级&lt;/p&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="Web攻防" scheme="127.0.0.1/categories/Web%E6%94%BB%E9%98%B2/"/>
    
    
      <category term="代码审计" scheme="127.0.0.1/tags/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
    
      <category term="PHP" scheme="127.0.0.1/tags/PHP/"/>
    
      <category term="Dvwa" scheme="127.0.0.1/tags/Dvwa/"/>
    
      <category term="渗透测试" scheme="127.0.0.1/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>简单的用户管理分析</title>
    <link href="127.0.0.1/2018/05/24/%E7%AE%80%E5%8D%95%E7%9A%84%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E5%88%86%E6%9E%90/"/>
    <id>127.0.0.1/2018/05/24/简单的用户管理分析/</id>
    <published>2018-05-24T13:14:59.000Z</published>
    <updated>2018-05-25T07:12:31.269Z</updated>
    
    <content type="html"><![CDATA[<h2 id="项目介绍"><a href="#项目介绍" class="headerlink" title="项目介绍"></a>项目介绍</h2><p>这是笔者从GITHUB上找的简单PHP程序( 一个可 <em>增删查</em> 的用户数据管理 )</p><a id="more"></a><p><img src="http://static.zybuluo.com/1kbfree/4z5de16ziysrio7dqad9u1ow/image_1cc2vfnu31qpg1a1j1fob13be3ejm.png" alt="image_1cc2vfnu31qpg1a1j1fob13be3ejm.png-72.6kB"></p><hr><h2 id="数据库连接代码"><a href="#数据库连接代码" class="headerlink" title="数据库连接代码:"></a>数据库连接代码:</h2><p><strong>先介绍一下数据库的表结构：</strong></p><p><img src="http://static.zybuluo.com/1kbfree/jgp8ljt3m0adp7i8ty1kkdr2/image_1cc3136er1ru31m9si1chlcue21t.png" alt="image_1cc3136er1ru31m9si1chlcue21t.png-24.4kB"></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $pdo = <span class="keyword">new</span> PDO(<span class="string">'mysql:host=localhost;dbname=data'</span>,<span class="string">'root'</span>,<span class="string">'root'</span>); <span class="comment">//PDO(PHP访问数据库定义了一个轻量级的、一致性的接口，它提供了一个数据访问抽象层，这样，无论使用什么数据库，都可以通过一致的函数执行查询和获取数据，比如mysql有limit，MSSQL没有limit，pdo会自动转换)</span></span><br><span class="line">    $pdo-&gt;exec(<span class="string">'set names utf8'</span>); <span class="comment">//设置编码</span></span><br><span class="line">    $pdo-&gt;setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE,PDO::FETCH_ASSOC); <span class="comment">//设置默认结果集模式为关联数组</span></span><br><span class="line">    $pdo-&gt;setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION); <span class="comment">//修改报错模式</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="其中的PDO是"><a href="#其中的PDO是" class="headerlink" title="其中的PDO是:"></a>其中的PDO是:</h3><p><em>PDO(PHP访问数据库定义了一个轻量级的、一致性的接口，它提供了一个数据访问抽象层，这样，无论使用什么数据库，都可以通过一致的函数执行查询和获取数据，比如mysql有limit，MSSQL没有limit，pdo会自动转换)</em></p><p><strong>PDO好处：</strong></p><ol><li>更换数据库时取得极大便利(从A数据库换成其他数据库可以不需要修改查询的代码，因为PDO帮我实现了)</li><li>更换数据库时取得极大便利</li></ol><h2 id="首页代码："><a href="#首页代码：" class="headerlink" title="首页代码："></a>首页代码：</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="keyword">include</span> <span class="string">'config.inc.php'</span>; <span class="comment">//包含连接数据库的代码</span></span><br><span class="line"></span><br><span class="line">    $len = <span class="number">10</span>; <span class="comment">//每页展现10条数据</span></span><br><span class="line">    $page = !<span class="keyword">empty</span>($_GET[<span class="string">"page"</span>]) ? $_GET[<span class="string">"page"</span>] : <span class="number">1</span>;<span class="comment">//三元表达式，表示如果$_GET['page']为空时，默认值为1</span></span><br><span class="line"></span><br><span class="line">    $sqlTotal = <span class="string">"select count(Id) from t1"</span>; <span class="comment">// SQL语句。意思是查询t1表中的Id字段个数</span></span><br><span class="line">    $smtTotal = $pdo-&gt;prepare($sqlTotal); <span class="comment">//准备要执行的SQL语句并返回一个 PDOStatement 对象(PHP 5 &gt;= 5.1.0, PECL pdo &gt;= 0.1.0)</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;strong&gt;\$sqlTotal:&lt;/strong&gt;"</span>;</span><br><span class="line">    print_r($smtTotal);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;br /&gt;"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;strong&gt;execute():&lt;/strong&gt;"</span>;</span><br><span class="line">    print_r($smtTotal-&gt;execute());</span><br><span class="line">    $tot = $smtTotal-&gt;fetchColumn();    <span class="comment">//总记录数</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;br /&gt;"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;strong&gt;\$tot:&lt;/strong&gt;"</span>;</span><br><span class="line">    print_r($tot);</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;br /&gt;"</span>;</span><br><span class="line"></span><br><span class="line">    $pages = ceil($tot/$len);   <span class="comment">//总页数</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;strong&gt;\$pages:&lt;/strong&gt;"</span>;</span><br><span class="line">    print_r($pages);</span><br><span class="line">    ... ...(省略，先讲解一下这段代码的用法)</span><br></pre></td></tr></table></figure><p><img src="http://static.zybuluo.com/1kbfree/bepqcvepabcym10rq7qnksgz/image_1cc30pp7sd2s1qr7198mul41vig1g.png" alt="image_1cc30pp7sd2s1qr7198mul41vig1g.png-34.8kB"></p><blockquote><p>可以看看我写的PDO的<a href="https://www.zybuluo.com/1kbfree/note/1128672" target="_blank" rel="noopener">文章</a>(别夸我，谁让我是爱学习的好孩子)</p></blockquote><h3 id="首页的代码我统统写了注释："><a href="#首页的代码我统统写了注释：" class="headerlink" title="首页的代码我统统写了注释："></a>首页的代码我统统写了注释：</h3><p><img src="http://static.zybuluo.com/1kbfree/sc0wogf37jngd8cpysvke01r/image_1cc3s3mnp9ma7luult1egp1rk19.png" alt="image_1cc3s3mnp9ma7luult1egp1rk19.png-178.8kB"></p><h2 id="更改用户数据代码："><a href="#更改用户数据代码：" class="headerlink" title="更改用户数据代码："></a>更改用户数据代码：</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"></span></span><br><span class="line">/* </span><br><span class="line">    思路:先获取对应的数据，然后返回到输入框，如果我们选择提交，表单就会发送的数据就会更改到数据库里，实现更改内容</span><br><span class="line"><span class="php">*/</span></span><br><span class="line"><span class="php">    </span></span><br><span class="line"><span class="php"><span class="keyword">include</span> <span class="string">'config.inc.php'</span>;</span></span><br><span class="line"><span class="php">$Id = $_GET[<span class="string">"Id"</span>]; <span class="comment">//获取GET请求过来的Id值</span></span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php">$sql = <span class="string">"select * from t1 where Id=?"</span>; <span class="comment">//SQL语句的查询</span></span></span><br><span class="line"><span class="php">$smt = $pdo-&gt;prepare($sql); <span class="comment">//给SQL语句做标记</span></span></span><br><span class="line"><span class="php">$smt-&gt;bindValue(<span class="number">1</span>,$Id); <span class="comment">//想成是给上面的?改成$Id变量的值</span></span></span><br><span class="line"><span class="php">$smt-&gt;execute(); <span class="comment">//执行SQL语句</span></span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php">$row = $smt-&gt;fetch(); <span class="comment">//接收SQL语句查询到的结果</span></span></span><br><span class="line"><span class="php"></span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>update<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"bower_components/jquery/dist/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"bower_components/bootstrap/dist/js/bootstrap.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"bower_components/bootstrap/dist/css/bootstrap.min.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"page-header"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"index.php"</span> <span class="attr">class</span>=<span class="string">"btn btn-warning"</span>&gt;</span>查看用户<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span>修改用户<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"act.php?act=update&amp;Id=&lt;?php echo $Id;?&gt;"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span> <span class="comment">&lt;!-- act页面实现的修改功能，这里只需要传入要修改的Id值就可以更改此Id中对应的数据 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>新用户名:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            &lt;input type="text" class="form-control" name="Name" value=&lt;?php echo "&#123;$row['Name']&#125;";//把查询到的数据的Name返回到输入框中，这样子我们就可以实现修改功能 ?&gt;</span><br><span class="line">            &gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>新密码:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"Pwd"</span> <span class="attr">value</span>=</span></span><br><span class="line">            &lt;?php echo "&#123;$row['Pwd']&#125;"; //同上?&gt;</span><br><span class="line">            &gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">class</span>=<span class="string">"btn btn-danger"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="插入数据代码："><a href="#插入数据代码：" class="headerlink" title="插入数据代码："></a>插入数据代码：</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>add<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"bower_components/jquery/dist/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"bower_components/bootstrap/dist/js/bootstrap.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"bower_components/bootstrap/dist/css/bootstrap.min.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"page-header"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"index.php"</span> <span class="attr">class</span>=<span class="string">"btn btn-warning"</span>&gt;</span>查看用户<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span>添加用户<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"act.php?act=insert"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span> <span class="comment">&lt;!-- act.php页面实现了插入功能，所以这里我们只需要把内容提交到act.php就可以完成插入内容 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span>&gt;</span>用户名:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"Name"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">label</span>&gt;</span>密码:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"Pwd"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">class</span>=<span class="string">"btn btn-danger"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="删除功能代码"><a href="#删除功能代码" class="headerlink" title="删除功能代码:"></a>删除功能代码:</h2><p><strong>删除页面代码也在首页(index.php)里实现的</strong><br><img src="http://static.zybuluo.com/1kbfree/snrsn6lp951qha73mz3fbdpa/image_1cc57auk9gkn62o16121cad1bau9.png" alt="image_1cc57auk9gkn62o16121cad1bau9.png-104.5kB"><br><em>一般我们删除操作是需要十分谨慎的，因为数据一旦删除是无法恢复的，那么如果用户不小心点到了按钮，我们就应该提醒他是否要删除。</em></p><p><img src="http://static.zybuluo.com/1kbfree/h9iti01jywhmby5a3x4n8h3o/image_1cc57donr1leu1i341t1r1479fafm.png" alt="image_1cc57donr1leu1i341t1r1479fafm.png-36kB"><br><em>可以看到这里有一个class是delete，然后看到下面有一段提醒是否执行删除的JS代码：</em><br><img src="http://static.zybuluo.com/1kbfree/79lf8bu5wdylyn1rmkhrzgu9/image_1cc57nvhn1dml1u0910ko1sccv4213.png" alt="image_1cc57nvhn1dml1u0910ko1sccv4213.png-48.6kB"></p><h2 id="最后我们看看act-php的代码："><a href="#最后我们看看act-php的代码：" class="headerlink" title="最后我们看看act.php的代码："></a>最后我们看看act.php的代码：</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    <span class="keyword">include</span> <span class="string">'config.inc.php'</span>; <span class="comment">//包含PDO链接数据库代码</span></span><br><span class="line"></span><br><span class="line">    $act = $_GET[<span class="string">"act"</span>]; <span class="comment">//获取GET请求过来的act值，来实现增、删、改。</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>($act == <span class="string">'delete'</span>)&#123; <span class="comment">//如果是选择删除</span></span><br><span class="line">        $Id = $_GET[<span class="string">"Id"</span>]; <span class="comment">//获取GET请求过来的ID</span></span><br><span class="line">        $sql = <span class="string">"delete from t1 where Id=?"</span>; <span class="comment">//这是SQL语句的删除</span></span><br><span class="line">        $smt = $pdo-&gt;prepare($sql); <span class="comment">//给SQL语句做标记</span></span><br><span class="line">        $smt-&gt;bindValue(<span class="number">1</span>,$Id); <span class="comment">//绑定一个值到用作预处理的 SQL 语句中的对应命名占位符或问号占位符</span></span><br><span class="line">    <span class="keyword">if</span>($smt-&gt;execute())&#123; <span class="comment">//判断是否执行成功，如果执行成功返回的是1</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"&lt;script&gt;location='index.php'&lt;/script&gt;"</span>; <span class="comment">//执行成功就跳转到首页(index.php)</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>($act == <span class="string">'insert'</span>)&#123; <span class="comment">//如果是选择插入</span></span><br><span class="line">        $Name = $_POST[<span class="string">"Name"</span>]; <span class="comment">//获取POST请求的Name值</span></span><br><span class="line">        $Pwd = $_POST[<span class="string">"Pwd"</span>]; <span class="comment">//获取POST请求的Pwd值</span></span><br><span class="line">        $sql = <span class="string">"insert into t1(Name,Pwd) values('&#123;$Name&#125;','&#123;$Pwd&#125;')"</span>; <span class="comment">//这是SQL语句的插入</span></span><br><span class="line">        $smt = $pdo-&gt;prepare($sql); <span class="comment">//给SQL语句做标记</span></span><br><span class="line">        <span class="keyword">if</span>($smt-&gt;execute())&#123; <span class="comment">//判断是否执行成功</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"&lt;script&gt;location='index.php'&lt;/script&gt;"</span>; <span class="comment">//执行成功就跳转到首页(index.php)</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">/*如果act=update和id=x，那么就执行修改的SQL语句，修改条件(where)是Id=x*/</span></span><br><span class="line">    <span class="keyword">if</span>($act == <span class="string">'update'</span>)&#123; <span class="comment">//如果是更改</span></span><br><span class="line">        $Id = $_GET[<span class="string">"Id"</span>]; <span class="comment">//获取GET请求的Id值</span></span><br><span class="line">        $Name = $_POST[<span class="string">"Name"</span>]; <span class="comment">//获取POST的Name值</span></span><br><span class="line">        $Pwd = $_POST[<span class="string">"Pwd"</span>]; <span class="comment">//获取POST请求的Pwd值</span></span><br><span class="line">        $sql = <span class="string">"update t1 set Name='&#123;$Name&#125;',Pwd='&#123;$Pwd&#125;' where Id=&#123;$Id&#125;"</span>; <span class="comment">//这是SQL语句的更改</span></span><br><span class="line">        $smt = $pdo-&gt;prepare($sql); <span class="comment">//给SQL语句做标记</span></span><br><span class="line">        <span class="keyword">if</span>($smt-&gt;execute())&#123; <span class="comment">//判断是否执行成功</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"&lt;script&gt;location='index.php'&lt;/script&gt;"</span>; <span class="comment">//如果执行成功就跳转到首页(index.php)</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><blockquote class="blockquote-center"><p>十年寒窗无人问，一举成名天下知<br>                            – Cai_Team</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;项目介绍&quot;&gt;&lt;a href=&quot;#项目介绍&quot; class=&quot;headerlink&quot; title=&quot;项目介绍&quot;&gt;&lt;/a&gt;项目介绍&lt;/h2&gt;&lt;p&gt;这是笔者从GITHUB上找的简单PHP程序( 一个可 &lt;em&gt;增删查&lt;/em&gt; 的用户数据管理 )&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="127.0.0.1/categories/%E7%BC%96%E7%A8%8B/"/>
    
    
      <category term="PHP" scheme="127.0.0.1/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>基于DVWA的反射型Xss测试平台Low等级讲解</title>
    <link href="127.0.0.1/2018/05/24/%E5%9F%BA%E4%BA%8EDVWA%E7%9A%84Xss%E6%B5%8B%E8%AF%95%E5%B9%B3%E5%8F%B0Low%E7%AD%89%E7%BA%A7%E8%AE%B2%E8%A7%A3/"/>
    <id>127.0.0.1/2018/05/24/基于DVWA的Xss测试平台Low等级讲解/</id>
    <published>2018-05-24T09:34:46.000Z</published>
    <updated>2018-05-25T06:53:32.520Z</updated>
    
    <content type="html"><![CDATA[<div class="note primary"><p>Dvwa是一个网站渗透测试演练平台，里面包括了Xss攻击,Sql注入攻击，Csrf漏洞、文件上传漏洞、命令注入漏洞等，而且每个漏洞都分为<code>Low(低等级)、Medium( 中等级 )、High( 高等级 )、Impossible( 没漏洞等级 )</code></p></div><a id="more"></a><p>下载过程和安装过程网上可以找到我就不讲解了。</p><h3 id="首先将Dvwa等级设置成Low"><a href="#首先将Dvwa等级设置成Low" class="headerlink" title="首先将Dvwa等级设置成Low:"></a>首先将<code>Dvwa</code>等级设置成<code>Low</code>:</h3><p><img src="http://static.zybuluo.com/1kbfree/xhlnfqib3ib7m5jpq5s0k9us/image_1ce8m63q6g1s5ab1ef51ilf92m9.png" alt="image_1ce8m63q6g1s5ab1ef51ilf92m9.png-135.5kB"></p><hr><h2 id="开始Xss漏洞讲解"><a href="#开始Xss漏洞讲解" class="headerlink" title="开始Xss漏洞讲解"></a>开始Xss漏洞讲解</h2><h3 id="Xss反射型："><a href="#Xss反射型：" class="headerlink" title="Xss反射型："></a>Xss反射型：</h3><p><img src="http://static.zybuluo.com/1kbfree/bzktsumqyk5cl12z0z15nojx/image_1ce8mao1la4233k77t19h21v82m.png" alt="image_1ce8mao1la4233k77t19h21v82m.png-203.8kB"><br><em>当输入<code>hello</code>在输入框点击Submit后，会输出一个<code>Hello iamfree</code>，那么我们来看看这是如何实现的</em></p><h4 id="实现的代码："><a href="#实现的代码：" class="headerlink" title="实现的代码："></a>实现的代码：</h4><p><img src="http://static.zybuluo.com/1kbfree/28z6tmahfg6x1z7reai804j1/image_1ce8n2a0ijtjgs8iitt4a1ou09.png" alt="image_1ce8n2a0ijtjgs8iitt4a1ou09.png-147.4kB"><br><em>因为这是<code>Low</code>级别的，所以我们可以清楚的看见这里没有做任何过滤，我们只需要输入一串而已的Js代码就可以实现盗取别人Cookie，做钓鱼之类的功能，下面我来简单的演示一下~</em></p><p>输入<code>&lt;img src=x onerror=alert(&#39;iamfree&#39;)&gt;</code>后，Url变成<code>http://127.0.0.1/dvwa/vulnerabilities/xss_r/?name=%3Cimg+src%3Dx+onerror%3Dalert%28%27iamfree%27%29%3E#</code>，效果:<br><img src="http://static.zybuluo.com/1kbfree/hl67ru1a4l4ltyvhi82dj0bw/image_1ce8naell1jlrkv6s1214dh7n7m.png" alt="image_1ce8naell1jlrkv6s1214dh7n7m.png-130.1kB"></p><div class="note warning"><p><code>&lt;img src=x onerror=alert(&#39;iamfree&#39;)&gt;</code>的src表示img图片的地址，可以是本地也可以是Url形式;onerror的意思是如果图片没有正常显示的话就会执行<code>=</code>后面的代码，因为这里<code>src=x</code>而<code>x</code>是不存在的，所以无法显示，就会报错了~</p></div><h3 id="如何防御"><a href="#如何防御" class="headerlink" title="如何防御"></a>如何防御</h3><p><strong>这里的话防御很简单的，只需要一个函数即可：</strong><br><img src="http://static.zybuluo.com/1kbfree/n875b1a8nh9rciqc7w66vxku/image_1ce8nikp01hm91qse12112ra2802p.png" alt="image_1ce8nikp01hm91qse12112ra2802p.png-53.3kB"></p><p><strong>防御代码:</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">header (<span class="string">"X-XSS-Protection: 0"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span>( array_key_exists( <span class="string">"name"</span>, $_GET ) &amp;&amp; $_GET[ <span class="string">'name'</span> ] != <span class="keyword">NULL</span> ) &#123;</span><br><span class="line">    <span class="comment">// Feedback for end user</span></span><br><span class="line">    <span class="comment">// 防御的反射Xss</span></span><br><span class="line">    $name = htmlspecialchars($_GET[<span class="string">'name'</span>]);</span><br><span class="line">    $html .= <span class="string">'&lt;pre&gt;Hello '</span> . $name . <span class="string">'&lt;/pre&gt;'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p><p><strong>继续访问刚才的Url(<code>http://127.0.0.1/dvwa/vulnerabilities/xss_r/?name=%3Cimg+src%3Dx+onerror%3Dalert%28%27iamfree%27%29%3E#</code>)，看看是否有效:</strong><br><img src="http://static.zybuluo.com/1kbfree/3y12i2skpud63a1qgec93sxz/image_1ce8nph771gbkh9n1v6q16p41ho736.png" alt="image_1ce8nph771gbkh9n1v6q16p41ho736.png-175.7kB"><br><em>成功的防止了Xss反射型攻击了~</em></p><h3 id="htmlspecialchars函数的官方解释"><a href="#htmlspecialchars函数的官方解释" class="headerlink" title="htmlspecialchars函数的官方解释:"></a>htmlspecialchars函数的官方解释:</h3><p><img src="http://static.zybuluo.com/1kbfree/piy4p2lkq0h81v0d1u4y5mb7/image_1ce8nug1jgbj1iib1hl91ii51vic3j.png" alt="image_1ce8nug1jgbj1iib1hl91ii51vic3j.png-137.1kB"></p><blockquote class="blockquote-center"><p>十年寒窗无人问，一举成名天下知<br>                            – Cai_Team</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note primary&quot;&gt;&lt;p&gt;Dvwa是一个网站渗透测试演练平台，里面包括了Xss攻击,Sql注入攻击，Csrf漏洞、文件上传漏洞、命令注入漏洞等，而且每个漏洞都分为&lt;code&gt;Low(低等级)、Medium( 中等级 )、High( 高等级 )、Impossible( 没漏洞等级 )&lt;/code&gt;&lt;/p&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="Web攻防" scheme="127.0.0.1/categories/Web%E6%94%BB%E9%98%B2/"/>
    
    
      <category term="代码审计" scheme="127.0.0.1/tags/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
    
      <category term="PHP" scheme="127.0.0.1/tags/PHP/"/>
    
      <category term="Dvwa" scheme="127.0.0.1/tags/Dvwa/"/>
    
      <category term="渗透测试" scheme="127.0.0.1/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>某CTF赛的一处代码简单讲解</title>
    <link href="127.0.0.1/2018/05/24/%E6%9F%90CTF%E8%B5%9B%E7%9A%84%E4%B8%80%E5%A4%84%E4%BB%A3%E7%A0%81%E7%AE%80%E5%8D%95%E8%AE%B2%E8%A7%A3/"/>
    <id>127.0.0.1/2018/05/24/某CTF赛的一处代码简单讲解/</id>
    <published>2018-05-24T08:07:33.000Z</published>
    <updated>2018-05-25T07:48:24.524Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><p>此篇文章只是给里面的代码处做一下详细的讲解~<br>原文地址:loudong.360.cn/School/content/id/285</p></blockquote><a id="more"></a><p>CTF线下赛中一处代码( 红色区域处 )，现在就是来讲解这个的~<br><img src="http://static.zybuluo.com/1kbfree/utarpdc4wsivh5yzlnihpacr/image_1ce8hrduq1kqieu7kt57qo17mj9.png" alt="image_1ce8hrduq1kqieu7kt57qo17mj9.png-33.3kB"></p><h2 id="讲解开始"><a href="#讲解开始" class="headerlink" title="讲解开始:"></a>讲解开始:</h2><p>首先看一下我写的这个代码:<br><img src="http://static.zybuluo.com/1kbfree/d2mpfibd3nhui8m27fbu41yo/image_1ce8htj9h1i8l11pqbhu1tun16s8m.png" alt="image_1ce8htj9h1i8l11pqbhu1tun16s8m.png-99.2kB"><br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">e</span><span class="params">( $str )</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( is_array( $str ) )&#123; <span class="comment">//如果是列表~</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"&lt;pre&gt;"</span>;</span><br><span class="line">        var_dump( $str );</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123; </span><br><span class="line">        <span class="keyword">echo</span> $str ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$mylist = [ </span><br><span class="line">    <span class="string">'ctrl'</span> =&gt; ( !<span class="keyword">empty</span>($_GET[<span class="string">'p'</span>]) ? $_GET[<span class="string">'p'</span>] : <span class="string">'blog'</span> ) , <span class="comment">//ctrl的value值：如果get请求的p值不为空，那么就返回get请求的p值，否者返回blog</span></span><br><span class="line">    <span class="string">'template'</span> =&gt; ( !<span class="keyword">empty</span>($_GET[<span class="string">'t'</span>]) ? $_GET[<span class="string">'t'</span>] : <span class="string">'pc'</span> ) <span class="comment">//template的value值：如果get请求的t值不为空，那么就返回get请求的t值，否者返回pc\</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">e( $mylist );</span><br></pre></td></tr></table></figure></p><div class="note primary"><p>这里的<code>!empty($_GET[&#39;p&#39;]) ? $_GET[&#39;p&#39;] : &#39;blog&#39;</code>是三元表达式，详细用法我也在代码处讲解过了</p></div><h3 id="实验一下代码功能："><a href="#实验一下代码功能：" class="headerlink" title="实验一下代码功能："></a>实验一下代码功能：</h3><p><img src="http://static.zybuluo.com/1kbfree/fttlcckmsujfj51kx8w604gg/image_1ce8i4heebh715oe3p410o7epc9.png" alt="image_1ce8i4heebh715oe3p410o7epc9.png-83.8kB"><br><em>如果没有添加任何值的话，默认的就是ctrl的值为blog,template的值为pc</em></p><h4 id="我们传递一下GET请求的p值和GET请求的t值"><a href="#我们传递一下GET请求的p值和GET请求的t值" class="headerlink" title="我们传递一下GET请求的p值和GET请求的t值:"></a>我们传递一下<code>GET请求的p值</code>和<code>GET请求的t值</code>:</h4><p><img src="http://static.zybuluo.com/1kbfree/yy85lf6qhabol733jjgb233o/image_1ce8idtit131p1mjr1abc1lngs1a1j.png" alt="image_1ce8idtit131p1mjr1abc1lngs1a1j.png-140.4kB"></p><p><img src="http://static.zybuluo.com/1kbfree/5onny736jjn5dx6y2ftao8a0/image_1ce8ibrda1vb11drk5vr8iju2216.png" alt="image_1ce8ibrda1vb11drk5vr8iju2216.png-162.5kB"></p><div class="note success"><p>如果你们觉得这篇文章有点水的话… 那也确实是，哈哈哈(太基础)，但是我只是想来做一篇文章来摆设摆设~</p></div> <blockquote class="blockquote-center"><p>十年寒窗无人问，一举成名天下知<br>                            – Cai_Team</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;p&gt;此篇文章只是给里面的代码处做一下详细的讲解~&lt;br&gt;原文地址:loudong.360.cn/School/content/id/285&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Web攻防" scheme="127.0.0.1/categories/Web%E6%94%BB%E9%98%B2/"/>
    
    
      <category term="CTF" scheme="127.0.0.1/tags/CTF/"/>
    
      <category term="代码审计" scheme="127.0.0.1/tags/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/"/>
    
      <category term="PHP" scheme="127.0.0.1/tags/PHP/"/>
    
  </entry>
  
</feed>
